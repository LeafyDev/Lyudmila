<UserControl x:Class="Lyudmila.Client.Views.Music"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:wpfSoundVisualizationLib="clr-namespace:WPFSoundVisualizationLib;assembly=WPFSoundVisualizationLib"
             d:DesignHeight="450"
             d:DesignWidth="900"
             Background="{DynamicResource MaterialDesignPaper}"
             DataContext="{Binding RelativeSource={RelativeSource Self}}"
             FontFamily="pack://application:,,,/MaterialDesignThemes.Wpf;component/Resources/Roboto/#Roboto"
             TextElement.Foreground="{DynamicResource MaterialDesignBody}"
             mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Slider.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Resources/Themes/Visualiser.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Name="MainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <wpfSoundVisualizationLib:SpectrumAnalyzer x:Name="spectrumAnalyzer"
                                                   Grid.Row="0"
                                                   Grid.Column="0"
                                                   Margin="5"
                                                   BarCount="128" />

        <materialDesign:Card Grid.Row="0"
                             Grid.Column="1"
                             Margin="2"
                             Background="{DynamicResource CheckBoxBackgroundBrush}"
                             Foreground="{DynamicResource PrimaryHueMidForegroundBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Rectangle Grid.Row="0"
                           Height="35"
                           VerticalAlignment="Center"
                           Fill="{DynamicResource PrimaryHueDarkBrush}" />
                <Label x:Name="SongTitle"
                       Grid.Row="0"
                       Margin="5"
                       VerticalAlignment="Center"
                       FontWeight="ExtraBold" />
                <StackPanel Grid.Row="1"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal">
                    <Button Margin="5" Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}" Click="Btn_Previous">
                        <materialDesign:PackIcon Width="24"
                                                 Height="24"
                                                 Kind="SkipPrevious" />
                    </Button>
                    <Button x:Name="Button_PlayPause"
                            Margin="5"
                            Click="Btn_PlayPause"
                            Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}">
                        <materialDesign:PackIcon x:Name="PlayPauseIcon"
                                                 Width="24"
                                                 Height="24"
                                                 Kind="Play" />
                    </Button>
                    <Button Margin="5" Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}" Click="Btn_Next">
                        <materialDesign:PackIcon Width="24"
                                                 Height="24"
                                                 Kind="SkipNext" />
                    </Button>
                </StackPanel>
                <materialDesign:PackIcon Grid.Row="2"
                                         Margin="0,0,85,0"
                                         HorizontalAlignment="Right"
                                         VerticalAlignment="Center"
                                         Kind="VolumeHigh" />
                <Slider Grid.Row="2"
                        Width="75"
                        Margin="5"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Maximum="1"
                        Minimum="0"
                        Orientation="Horizontal"
                        ValueChanged="VolumeChanged"
                        Value="1" />
            </Grid>
        </materialDesign:Card>


        <materialDesign:Card Grid.Row="1"
                             Grid.Column="1"
                             Margin="2"
                             Background="{DynamicResource CheckBoxBackgroundBrush}"
                             Foreground="{DynamicResource PrimaryHueMidForegroundBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Rectangle Grid.Row="0"
                           Height="35"
                           VerticalAlignment="Center"
                           Fill="{DynamicResource PrimaryHueDarkBrush}" />
                <Label Grid.Row="0"
                       Margin="5"
                       VerticalAlignment="Center"
                       Content="Song List"
                       FontWeight="ExtraBold" />
                <Button Grid.Row="0"
                        Width="25"
                        Margin="5"
                        HorizontalAlignment="Right"
                        Click="ChangeFolder">
                    <materialDesign:PackIcon Kind="Folder" />
                </Button>

                <ListBox x:Name="SongList"
                         Grid.Row="1"
                         Margin="5"
                         MouseDoubleClick="SongList_MouseDoubleClick"
                         SelectionMode="Single">
                    <ScrollViewer Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ListBox}, Path=ActualWidth, Mode=OneWay}">
                        <StackPanel>
                            <ListBoxItem Content="Artist - Title" />
                        </StackPanel>
                    </ScrollViewer>
                </ListBox>
            </Grid>
        </materialDesign:Card>

        <wpfSoundVisualizationLib:WaveformTimeline x:Name="waveformTimeline"
                                                   Grid.Row="2"
                                                   Grid.Column="0"
                                                   Grid.ColumnSpan="2"
                                                   Height="75"
                                                   Margin="5"
                                                   BorderThickness="1" />
    </Grid>
</UserControl>
